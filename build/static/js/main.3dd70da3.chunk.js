(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(34)},33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(13),i=a.n(l),c=a(10),o=a(2),u=a(3),s=a(4),m=a(1),h=a(8),d=a(7),p=a(5),b=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={help:null},n}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{trigger:r.a.createElement("button",{className:"help main-button shadow"},"Help"),position:"right"},r.a.createElement("div",{className:"popup-box"},"If you need help with how to use the application, check out the ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.google.com/document/d/14xnfxBzDkTYQqryIv3YDtga34cPTaUkFUND-bL-N7UY/edit?usp=sharing"},"FAQ Page"),"!"))}}]),a}(r.a.Component);function f(e,t){return 2+t/1e3*70*(e.size/28500)}var g=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={inputFile:"",locirepeatsString:"",numIters:1e4},n.handleSubmit=n.handleSubmit.bind(Object(m.a)(n)),n.handleChangeFile=n.handleChangeFile.bind(Object(m.a)(n)),n.handleChangeLocirepeats=n.handleChangeLocirepeats.bind(Object(m.a)(n)),n.handleChangeIters=n.handleChangeIters.bind(Object(m.a)(n)),n}return Object(s.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.locirepeatsString.split(",").map((function(e){return parseInt(e.trim(),10)})).filter((function(e){return e}));this.props.handleSubmit(this.state.inputFile,t,this.state.numIters)}},{key:"handleChangeFile",value:function(e){this.setState({inputFile:e.target.files[0]})}},{key:"handleChangeLocirepeats",value:function(e){this.setState({locirepeatsString:e.target.value})}},{key:"handleChangeIters",value:function(e){this.setState({numIters:e.target.value})}},{key:"render",value:function(){return r.a.createElement(p.a,{trigger:r.a.createElement("button",{className:"main-button run-button shadow"},"Run Test"),position:"bottom left"},r.a.createElement("div",{className:"popup-box"},r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("label",{htmlFor:"InputFile"},"Excel File:"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",name:"InputFile",onChange:this.handleChangeFile}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"locirepeats"},"Loci Repeats:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",value:this.state.locirepeatsString,name:"locirepeats",onChange:this.handleChangeLocirepeats}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"numIts"},"Number of Iterations:"),r.a.createElement("br",null),r.a.createElement("input",{type:"number",value:this.state.numIters,name:"numIts",onChange:this.handleChangeIters}),r.a.createElement("hr",null),r.a.createElement("input",{type:"submit",value:"Run Test"}),this.state.inputFile&&r.a.createElement("span",{style:{marginLeft:"5px"}},"(Estimated Time: ",r.a.createElement("b",null,f(this.state.inputFile,this.state.numIters).toFixed(2),"s"),")"))))}}]),a}(r.a.Component);function v(e){return r.a.createElement(p.a,{trigger:r.a.createElement("button",{className:"settings main-button shadow",style:{display:"flex",justifyContent:"center"}},"Settings"),position:"bottom right"},r.a.createElement("div",{className:"settings-data popup-box"},"Select a language: ",r.a.createElement("br",null),r.a.createElement("select",{name:"language"},r.a.createElement("option",{value:"english"},"English"))))}var E=a(16),y=a(17),O=a.n(y),j=a(18),S=a(20),C=a(12);function k(e){var t=e.columnNames,a=e.columnSortKeys,n=e.items,l=e.itemToTableRowFunc,i=w(n),c=i.sortedItems,o=i.requestSort,u=i.sortConfig,s=function(e){if(u)return u.key===e?u.direction:void 0},m={width:"100%",height:"100%",fontWeight:"bold"};return r.a.createElement("table",{style:{align:"center",margin:"0 auto",width:"80%"},className:"shadow"},r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e,t){return r.a.createElement("th",{key:e},r.a.createElement("button",{style:m,type:"button",onClick:function(){return o(a[t])},className:s(a[t])},e))})))),r.a.createElement("tbody",null,c&&c.length>0?c.map((function(e){return l(e)})):r.a.createElement("tr",null,r.a.createElement("td",{style:{width:"100%",textAlign:"center"},colSpan:t.length},"You haven't run any tests yet"))))}var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=Object(n.useState)(t),r=Object(C.a)(a,2),l=r[0],i=r[1],c=Object(n.useMemo)((function(){var t=Object(S.a)(e);return null!==l&&t.sort((function(e,t){return e[l.key]<t[l.key]?"ascending"===l.direction?-1:1:e[l.key]>t[l.key]?"ascending"===l.direction?1:-1:0})),t}),[e,l]),o=function(e){var t="ascending";l&&l.key===e&&"ascending"===l.direction&&(t="descending"),i({key:e,direction:t})};return{sortedItems:c,requestSort:o,sortConfig:l}};function F(e){return r.a.createElement("div",null,r.a.createElement("h1",{align:"center"},"Results"),r.a.createElement(k,{columnNames:["Date","Time","Input File Name","Status","Output"],columnSortKeys:["date","date","inputFilename","status",""],items:Object.values(e.data).reverse(),itemToTableRowFunc:function(e){var t=e.date,a=e.inputFilename,n=e.status,l=e.results.output_file_text;return r.a.createElement("tr",{key:t.toISOString()},r.a.createElement("td",null,t.toLocaleDateString()),r.a.createElement("td",null,t.toLocaleTimeString()),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,function(e){if(!e)return"";var t=Object.keys(e);return t.splice(t.indexOf("probability_of_recrudescence.csv"),1),r.a.createElement("div",null,r.a.createElement(I,{key:"probability_of_recrudescence.csv",csvFileName:"probability_of_recrudescence.csv",csvFileText:e["probability_of_recrudescence.csv"]}),r.a.createElement(N,{fileNames:t,fileContentDict:e,downloadName:"advanced_stats"}))}(l)))}}))}var N=function(e){var t,a=e.fileNames,n=e.fileContentDict,l=e.downloadName,i=new O.a,c=Object(E.a)(a);try{for(c.s();!(t=c.n()).done;){var o=t.value,u=n[o];i.file(o,u)}}catch(s){c.e(s)}finally{c.f()}return r.a.createElement("p",null,r.a.createElement("a",{href:"#",onClick:function(e){e.preventDefault(),i.generateAsync({type:"blob"}).then((function(e){return Object(j.saveAs)(e,"".concat(l,".zip"))}))}},l,".zip"))},I=function(e){var t=e.csvFileName,a=e.csvFileText,n="data:text/csv;charset=utf-8,".concat(a),l=encodeURI(n);return r.a.createElement("p",null,r.a.createElement("a",{href:l,download:t},t))},R=a(19);function x(e){var t=e.percentCompleted,a=e.secondsRunning;return t*=100,t=Math.max(0,Math.min(100,t)),a=Math.round(a),r.a.createElement("div",{style:{width:"100%",textAlign:"center"}},r.a.createElement("p",{style:{margin:"2px"}},t.toFixed(2),"% (Running for ",a,"s)"),r.a.createElement(R.a,{percent:t,strokeColor:"#84bc49",strokeWidth:"1",trailWidth:"1"}))}function D(e){var t=e.timeToComplete,a=void 0===t?10:t,l=Object(n.useState)(Date.now()),i=Object(C.a)(l,1)[0],c=Object(n.useState)(0),o=Object(C.a)(c,2),u=o[0],s=o[1];var m=u/(a=a||1e-4);setTimeout((function(){s((Date.now()-i)/1e3)}),10);return r.a.createElement("div",{style:{width:"30vw"}},r.a.createElement(x,{percentCompleted:m,secondsRunning:u}))}function T(e){return r.a.createElement("div",{className:"footer"},r.a.createElement("p",null,"To read about the algorithm powering this application, check out its ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://aac.asm.org/content/59/10/6096"},"article")," in the American Society for Microbiology.  If you want to contribute to this project or examine the technology, the software is available on our ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/GTJuniorDesign0100-2020/anti-malarial-MCMC-bayesian-algorithm"},"GitHub"),"."))}var _=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={tableData:{}},n.createNewAlgoRun=n.createNewAlgoRun.bind(Object(m.a)(n)),n.updateRunValues=n.updateRunValues.bind(Object(m.a)(n)),n}return Object(s.a)(a,[{key:"createNewAlgoRun",value:function(e,t,a){var n=this,l=new Date,i=l.toISOString(),u=f(e,a);this.setState({tableData:Object(o.a)(Object(o.a)({},this.state.tableData),{},Object(c.a)({},i,{date:l,inputFilename:e.name,status:r.a.createElement(D,{timeToComplete:u}),results:{}}))}),function(e,t,a){var n=new FormData;n.append("file",e);var r=t.reduce((function(e,t){return"".concat(e,"&locirepeat=").concat(t)}),"");return new Promise((function(e,t){fetch("/api/v1/recrudescences?iterations=".concat(a).concat(r),{method:"POST",body:n}).then((function(a){a.json().then((function(n){a.status<400?e(n):t(n)}),(function(e){t({message:"Failed to contact API server"})}))}))}))}(e,t,a).then((function(e){n.updateRunValues(i,{results:e,status:"Completed (in ".concat(e.totalRunTime,"s)")})}),(function(e){n.updateRunValues(i,{status:"ERROR: ".concat(e.message)})}))}},{key:"updateRunValues",value:function(e,t){this.setState({tableData:Object(o.a)(Object(o.a)({},this.state.tableData),{},Object(c.a)({},e,Object(o.a)(Object(o.a)({},this.state.tableData[e]),t)))})}},{key:"render",value:function(){return r.a.createElement("div",{className:"main-screen"},r.a.createElement("div",{className:"joined-buttons top-left"},r.a.createElement(g,{handleSubmit:this.createNewAlgoRun}),r.a.createElement(b,null)),r.a.createElement(v,null),r.a.createElement("div",{style:{gridColumnStart:2,gridRowStart:5}},r.a.createElement(F,{data:this.state.tableData})),r.a.createElement(T,null))}}]),a}(r.a.Component);a(33);i.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.3dd70da3.chunk.js.map